<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPH - Chiggas Production House</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <style>
        /* Custom styles for the page */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #e5e7eb;
            overflow-x: hidden;
        }
        /* Canvas for the 3D background */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            width: 100%;
            height: 100%;
        }
        /* Glassmorphism effect for cards */
        .glass-card {
            background: rgba(17, 24, 39, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            background: rgba(17, 24, 39, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }
        /* Custom scrollbar for a better look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        /* Style for the easter egg alert */
        #easter-egg-alert {
            transition: opacity 0.5s, transform 0.5s;
        }
        /* Style for the hero text scroll effect */
        #hero-content {
            transition: opacity 0.3s ease-out;
        }
        
        /* Styles for the interstellar Team Member Modal */
        #team-modal {
            transition: opacity 0.3s ease-in-out;
        }
        #team-modal-content {
            background-image: url('https://w.forfun.com/fetch/5d/5d10a2675a2398b5d375d9e17b881d5f.jpeg');
            background-size: cover;
            background-position: center;
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.5), inset 0 0 10px rgba(0, 255, 255, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.7);
            transition: transform 0.3s ease-in-out;
            overflow: hidden; 
        }
        /* Animated scanner line effect */
        #team-modal-content::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.8), transparent);
            animation: scan 4s linear infinite;
            opacity: 0;
        }
        #team-modal.is-open #team-modal-content::after {
            opacity: 1; 
        }
        @keyframes scan {
            0% { transform: translateY(-10px); }
            100% { transform: translateY(110%); }
        }
        
        /* Styles for scroll-in animations */
        .fade-in-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900">
    <canvas id="bg-canvas"></canvas>

    <header class="fixed top-0 left-0 w-full bg-black bg-opacity-30 backdrop-blur-md z-50 border-b border-gray-800">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-white">CPH</h1>
            <div class="space-x-4 text-lg">
                <a href="#projects" class="hover:text-cyan-400 transition-colors sound-click">Projects</a>
                <a href="#team" class="hover:text-cyan-400 transition-colors sound-click">About</a>
                <a href="#facts" class="hover:text-cyan-400 transition-colors sound-click">Fun Facts</a>
            </div>
        </nav>
    </header>

    <div class="relative z-10">
        <section class="h-screen flex items-center justify-center text-center">
            <div id="hero-content">
                <h2 class="text-5xl md:text-7xl font-extrabold text-white leading-tight">Chiggas Production House</h2>
                <p class="text-xl md:text-2xl text-gray-300 mt-4">Exploring the Cosmos, One Project at a Time.</p>
            </div>
        </section>

        <section id="projects" class="py-20 px-6 container mx-auto fade-in-section">
            <h3 class="text-4xl font-bold text-center mb-12">Our Projects</h3>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <a href="asteroid2.html" class="glass-card rounded-xl p-8 block">
                    <h4 class="text-2xl font-bold text-cyan-400 mb-2">3D Solar System</h4>
                    <p class="text-gray-300">An interactive journey through our solar system. Explore planets, the asteroid belt, and see the constellations in a fully 3D environment.</p>
                </a>
                <a href="constellation.html" class="glass-card rounded-xl p-8 block">
                    <h4 class="text-2xl font-bold text-cyan-400 mb-2">Constellation Guide</h4>
                    <p class="text-gray-300">Discover the stories behind the stars. A beautiful 2D guide that opens up into interactive 3D models of the constellations.</p>
                </a>
            </div>
        </section>

        <section id="facts" class="py-20 px-6 bg-black bg-opacity-20 fade-in-section">
            <div class="container mx-auto text-center max-w-3xl">
                <h3 class="text-4xl font-bold mb-4">Did You Know?</h3>
                <div class="glass-card rounded-xl p-8 min-h-[150px] flex items-center justify-center">
                    <p id="fun-fact" class="text-xl text-gray-200"></p>
                </div>
                <button id="next-fact-btn" class="mt-6 px-6 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg font-semibold transition-colors sound-click">Next Fact</button>
            </div>
        </section>

        <section id="team" class="py-20 px-6 container mx-auto fade-in-section">
            <h3 class="text-4xl font-bold text-center mb-12">The Team</h3>
            <div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8">
                <div class="glass-card rounded-xl p-6 text-center cursor-pointer team-member" 
                     data-name="Jeremy Bareh" 
                     data-image="jeremy.jpg" 
                     data-bio="Jeremy coded the primary HTML structure, styled the user interface with Tailwind CSS, and developed the core JavaScript for the dynamic 3D background using Three.js.">
                    <img src="jeremy.jpg" alt="Team member Jeremy Bareh" class="w-24 h-24 rounded-full mx-auto mb-4 object-cover border-2 border-gray-600 pointer-events-none">
                    <h4 class="text-xl font-bold mb-2">Jeremy Bareh</h4>
                    <p class="text-gray-400">Web Page Developer</p>
                </div>
                <div class="glass-card rounded-xl p-6 text-center cursor-pointer team-member"
                     data-name="Aaron Jaison"
                     data-image="aaron.jpg"
                     data-bio="Made circle things go in circles and line things be lines">
                    <img src="aaron.jpg" alt="Team member Aaron Jason" class="w-24 h-24 rounded-full mx-auto mb-4 object-cover border-2 border-gray-600 pointer-events-none">
                    <h4 class="text-xl font-bold mb-2">Aaron Jason</h4>
                    <p class="text-gray-400">Asset Development</p>
                </div>
                <div class="glass-card rounded-xl p-6 text-center cursor-pointer team-member"
                     data-name="Vedaant Rai"
                     data-image="vedant.jpg"
                     data-bio="Managed 3D assets and ensured the scientific accuracy of the data.">
                    <img src="vedant.jpg" alt="Team member Vedaant Rai" class="w-24 h-24 rounded-full mx-auto mb-4 object-cover border-2 border-gray-600 pointer-events-none">
                    <h4 class="text-xl font-bold mb-2">Vedaant Rai</h4>
                    <p class="text-gray-400">Constellation & Unity Assets</p>
                </div>
                <div class="glass-card rounded-xl p-6 text-center cursor-pointer team-member"
                     data-name="Jeremiah Paul"
                     data-image="jeremiah.jpg"
                     data-bio="Designed the server-side architecture for future project expansion. Made the fundamental code to modify it. ">
                    <img src="jeremiah.jpg" alt="Team member Jeremiah Paul" class="w-24 h-24 rounded-full mx-auto mb-4 object-cover border-2 border-gray-600 pointer-events-none">
                    <h4 class="text-xl font-bold mb-2">Jeremiah Paul</h4>
                    <p class="text-gray-400">Backend Development</p>
                </div>
                <div class="glass-card rounded-xl p-6 text-center cursor-pointer team-member"
                     data-name="Prince Raymond"
                     data-image="prince.jpg"
                     data-bio="Assisted in development and ensured cross-browser compatibility.">
                    <img src="prince.jpg" alt="Team member Prince Raymond" class="w-24 h-24 rounded-full mx-auto mb-4 object-cover border-2 border-gray-600 pointer-events-none">
                    <h4 class="text-xl font-bold mb-2">Prince Raymond</h4>
                    <p class="text-gray-400">HTML Debugging & Web Dev</p>
                </div>
            </div>
        </section>
        
        <footer class="text-center py-8 border-t border-gray-800 fade-in-section">
            <p>&copy; 2025 CPH - Chiggas Production House. All rights reserved.</p>
        </footer>
    </div>
    
    <div id="easter-egg-alert" class="fixed bottom-5 right-5 glass-card p-4 rounded-lg opacity-0 transform translate-y-10">
        <p class="text-cyan-400 font-semibold">Konami Code Activated!</p>
    </div>

    <div id="team-modal" class="fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-70 p-4 opacity-0 pointer-events-none">
        <div id="team-modal-content" class="bg-gray-800 text-white rounded-xl max-w-lg w-full p-8 relative transform scale-95">
            <div class="relative z-10">
                <button id="modal-close-btn" class="absolute -top-4 -right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
                <img id="modal-image" src="" alt="Team member photo" class="w-40 h-40 rounded-full mx-auto mb-6 object-cover border-4 border-cyan-500">
                <h4 id="modal-name" class="text-3xl font-bold text-center mb-2"></h4>
                <p id="modal-bio" class="text-gray-300 text-center"></p>
            </div>
        </div>
    </div>


    <script type="module">
        import * as THREE from 'three';

        // --- SOUND EFFECTS SETUP ---
        const backgroundSound = new Audio('background.mp3');
        backgroundSound.loop = true;
        backgroundSound.volume = 1.0;

        const clickSound = new Audio('click.mp3');
        const scrollSound = new Audio('scroll.mp3');

        window.addEventListener('click', () => {
            if (backgroundSound.paused) {
                backgroundSound.play();
            }
        }, { once: true });

        document.querySelectorAll('.sound-click').forEach(element => {
            element.addEventListener('click', () => {
                clickSound.currentTime = 0;
                clickSound.play();
            });
        });

        let scrollTimeout;
        window.addEventListener('scroll', () => {
            if (animationPhase !== 'orbit') return;
            if (scrollTimeout) return;
            scrollSound.currentTime = 0;
            scrollSound.play();
            scrollTimeout = setTimeout(() => {
                scrollTimeout = null;
            }, 150);
        });

        // --- MODAL LOGIC ---
        const teamModal = document.getElementById('team-modal');
        const teamModalContent = document.getElementById('team-modal-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const modalImage = document.getElementById('modal-image');
        const modalName = document.getElementById('modal-name');
        const modalBio = document.getElementById('modal-bio');

        document.querySelectorAll('.team-member').forEach(member => {
            member.addEventListener('click', () => {
                modalImage.src = member.dataset.image;
                modalName.textContent = member.dataset.name;
                modalBio.textContent = member.dataset.bio;

                teamModal.classList.add('is-open'); 
                teamModal.classList.remove('opacity-0', 'pointer-events-none');
                teamModalContent.classList.remove('scale-95');
            });
        });

        function closeModal() {
            teamModal.classList.remove('is-open');
            teamModal.classList.add('opacity-0', 'pointer-events-none');
            teamModalContent.classList.add('scale-95');
        }

        modalCloseBtn.addEventListener('click', closeModal);
        teamModal.addEventListener('click', (e) => {
            if (e.target === teamModal) {
                closeModal();
            }
        });


        // --- 3D SCENE SETUP ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        
        camera.position.set(0, 0, 10); 

        const textureLoader = new THREE.TextureLoader();

        const blackHoleTexture = textureLoader.load('https://wallpapercave.com/wp/wp11976287.jpg');
        const blackHoleGeometry = new THREE.SphereGeometry(0.5, 32, 32);
        const blackHoleMaterial = new THREE.MeshStandardMaterial({ 
            color: 0x000000,
            map: blackHoleTexture,
            roughness: 0.9,
            metalness: 0.1
        });
        const blackHole = new THREE.Mesh(blackHoleGeometry, blackHoleMaterial);
        scene.add(blackHole);
        
        const pointLight = new THREE.PointLight(0xffffff, 2, 50);
        scene.add(pointLight);
        scene.add(new THREE.AmbientLight(0xffffff, 0.2));

        // --- PARTICLE SYSTEM ---
        const particleCount = 40000;
        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);
        const particleV = [];
        const color = new THREE.Color();

        for (let i = 0; i < particleCount; i++) {
            const radius = 1 + Math.random() * 2;
            const angle = Math.random() * Math.PI * 2;
            
            positions[i * 3] = (Math.random() - 0.5) * 20;
            positions[i * 3 + 1] = (Math.random() - 0.5) * 20;
            positions[i * 3 + 2] = (Math.random() - 0.5) * 20;

            const dist = Math.sqrt(Math.pow(Math.cos(angle) * radius, 2) + Math.pow(Math.sin(angle) * radius, 2));
            
            const innerColor = new THREE.Color(0xFFF8DC);
            const outerColor = new THREE.Color(0xFF4500);
            const colorRatio = (dist - 1) / 2;
            color.lerpColors(innerColor, outerColor, colorRatio);
            
            colors[i * 3] = color.r;
            colors[i * 3 + 1] = color.g;
            colors[i * 3 + 2] = color.b;

            const speed = (1 / (dist * 50)) * (Math.random() * 0.5 + 0.5);
            particleV.push({
                x: -Math.sin(angle) * radius * speed,
                z: Math.cos(angle) * radius * speed,
                targetX: Math.cos(angle) * radius,
                targetY: (Math.random() - 0.5) * 0.1,
                targetZ: Math.sin(angle) * radius
            });
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        const material = new THREE.PointsMaterial({ size: 0.02, vertexColors: true, blending: THREE.AdditiveBlending, transparent: true });
        const particles = new THREE.Points(geometry, material);
        scene.add(particles);
        
        // --- PLANETS SETUP ---
        const planets = [];
        const planetCount = 7;
        const planetColors = [0x4A90E2, 0x50E3C2, 0xBD10E0, 0xF5A623, 0xD0021B, 0x7ED321, 0x8B572A];

        for (let i = 0; i < planetCount; i++) {
            const radius = 2.5 + Math.random() * 3.5;
            const speed = 0.0005 / (radius * 0.5);
            const size = 0.08 + Math.random() * 0.12;
            
            const planetGeometry = new THREE.SphereGeometry(size, 16, 16);
            const planetMaterial = new THREE.MeshStandardMaterial({ color: planetColors[i % planetColors.length], roughness: 0.8 });
            const planet = new THREE.Mesh(planetGeometry, planetMaterial);

            const orbitGeometry = new THREE.TorusGeometry(radius, 0.008, 16, 100);
            const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.15 });
            const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
            orbit.rotation.x = Math.PI / 2;
            
            planet.visible = false;
            orbit.visible = false;
            
            scene.add(planet);
            scene.add(orbit);

            planets.push({ mesh: planet, orbit: orbit, radius: radius, speed: speed, angle: Math.random() * Math.PI * 2 });
        }

        // --- ANIMATION LOGIC ---
        let rotationSpeed = 0.0005;
        let animationPhase = 'fly-in';
        let clock = new THREE.Clock();
        // --- NEW: Variables for scroll-based effects ---
        let scrollPlanetSpeedMultiplier = 1;
        let pulseSpeed = 2;
        let maxIntensity = 2;

        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getDelta();
            const elapsedTime = clock.getElapsedTime();
            const positions = particles.geometry.attributes.position.array;

            if (animationPhase === 'fly-in') {
                for (let i = 0; i < particleCount; i++) {
                    positions[i * 3 + 2] += delta * 15;
                }
                if (positions[2] > camera.position.z) {
                    animationPhase = 'settle';
                }
            } else if (animationPhase === 'settle') {
                let allInPlace = true;
                for (let i = 0; i < particleCount; i++) {
                    const idx = i * 3;
                    const pV = particleV[i];
                    const dx = pV.targetX - positions[idx];
                    const dy = pV.targetY - positions[idx + 1];
                    const dz = pV.targetZ - positions[idx + 2];
                    
                    if (Math.abs(dx) > 0.01 || Math.abs(dy) > 0.01 || Math.abs(dz) > 0.01) {
                        allInPlace = false;
                        positions[idx] += dx * 0.05;
                        positions[idx + 1] += dy * 0.05;
                        positions[idx + 2] += dz * 0.05;
                    }
                }
                camera.position.x += (0 - camera.position.x) * 0.02;
                camera.position.y += (8 - camera.position.y) * 0.02;
                camera.position.z += (0 - camera.position.z) * 0.02;
                camera.lookAt(scene.position);

                if (allInPlace && camera.position.y > 7.9) {
                    animationPhase = 'orbit';
                    planets.forEach(p => {
                        p.mesh.visible = true;
                        p.orbit.visible = true;
                    });
                }
            } else { // 'orbit' phase
                for (let i = 0; i < particleCount; i++) {
                    const ix = i * 3;
                    const iz = i * 3 + 2;
                    positions[ix] += particleV[i].x;
                    positions[iz] += particleV[i].z;
                    
                    const dist = Math.sqrt(positions[ix]**2 + positions[iz]**2);
                    if (dist < 0.6) {
                        const radius = 1 + Math.random() * 2;
                        const angle = Math.random() * Math.PI * 2;
                        positions[ix] = Math.cos(angle) * radius;
                        positions[iz] = Math.sin(angle) * radius;
                    }
                }
                particles.rotation.y += rotationSpeed;
                
                planets.forEach(p => {
                    // --- MODIFIED: Planet speed now affected by scroll ---
                    p.angle += p.speed * scrollPlanetSpeedMultiplier;
                    p.mesh.position.x = Math.cos(p.angle) * p.radius;
                    p.mesh.position.z = Math.sin(p.angle) * p.radius;
                });

                // --- NEW: Pulsating light effect ---
                pointLight.intensity = (maxIntensity / 2) + Math.sin(elapsedTime * pulseSpeed) * (maxIntensity / 2);
            }

            particles.geometry.attributes.position.needsUpdate = true;
            blackHole.rotation.y -= rotationSpeed * 0.5; 
            renderer.render(scene, camera);
        }
        animate();

        // --- SCROLL & RESIZE HANDLERS ---
        const heroContent = document.getElementById('hero-content');
        function handleScroll() {
            if (animationPhase !== 'orbit') return;
            const scrollY = window.scrollY;
            const scrollMax = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = scrollMax > 0 ? scrollY / scrollMax : 0;

            // Animate camera and update effect variables based on scroll
            camera.position.y = 8 - scrollPercent * 4;
            camera.lookAt(scene.position);
            
            // --- MODIFIED: Removed scene tilting and added new effect logic ---
            scrollPlanetSpeedMultiplier = 1 + scrollPercent * 5; // Planets speed up by up to 6x
            pulseSpeed = 2 + scrollPercent * 10; // Pulse speed increases
            maxIntensity = 2 + scrollPercent * 4; // Pulse intensity increases
            
            rotationSpeed = 0.0005 + scrollPercent * 0.002;
            heroContent.style.opacity = 1 - Math.min(scrollY / (window.innerHeight * 0.5), 1);
        }
        window.addEventListener('scroll', handleScroll);

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- FUN FACTS LOGIC ---
        const funFacts = [
            "A black hole is created when a massive star collapses under its own gravity.",
            "Neutron stars are so dense that a single teaspoon would weigh about 6 billion tons.",
            "The largest known volcano in our solar system is Olympus Mons on Mars. It's three times taller than Mount Everest.",
            "There are more stars in the universe than grains of sand on all the beaches on Earth.",
            "The 'Pillars of Creation' are vast clouds of interstellar gas and dust in the Eagle Nebula, roughly 7,000 light-years away.",
            "One day on Venus is longer than one year on Venus.",
            "The Kessel Run is a hyperspace route. Han Solo made it in less than twelve parsecs. (A parsec is a unit of distance, not time!)"
        ];
        let factIndex = 0;
        const factElement = document.getElementById('fun-fact');
        const nextFactBtn = document.getElementById('next-fact-btn');
        
        function showNextFact() {
            factIndex = (factIndex + 1) % funFacts.length;
            factElement.textContent = funFacts[factIndex];
        }
        nextFactBtn.addEventListener('click', showNextFact);
        showNextFact();

        // --- EASTER EGG ---
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiIndex = 0;
        window.addEventListener('keydown', (e) => {
            if (e.key === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    konamiIndex = 0;
                    activateEasterEgg();
                }
            } else {
                konamiIndex = 0;
            }
        });

        function activateEasterEgg() {
            const alert = document.getElementById('easter-egg-alert');
            alert.classList.remove('opacity-0', 'translate-y-10');
            rotationSpeed = 0.01;
            setTimeout(() => {
                alert.classList.add('opacity-0', 'translate-y-10');
                rotationSpeed = 0.0005;
            }, 4000);
        }
        
        // --- NEW: Scroll Fade-In Observer ---
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, {
            threshold: 0.1
        });
        sections.forEach(section => observer.observe(section));
    </script>
</body>
</html>